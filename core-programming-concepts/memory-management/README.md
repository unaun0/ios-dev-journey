# Swift. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é

[–ò—Å—Ç–æ—á–Ω–∏–∫](https://habr.com/ru/companies/otus/articles/649329/)

–î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ Swift –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–≤–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö: —Å—Ç–µ–∫ –∏ –∫—É—á—É. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –ø–∞–º—è—Ç–∏ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –ø–æ–¥ –æ–±—ä–µ–∫—Ç (–∞–ª–ª–æ–∫–∞—Ü–∏—é) –∏ –µ–µ –ø–æ—Å–ª–µ–¥—É—é—â–µ–µ –≤—ã—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ (–¥–µ–∞–ª–ª–æ–∫–∞—Ü–∏—é).

–í iOS —Å—É—â–µ—Å—Ç–≤—É—é—Ç –¥–≤–µ –º–æ–¥–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é:

* `MRC: manual reference counting` (—Ä—É—á–Ω–æ–π –ø–æ–¥—Å—á–µ—Ç —Å—Å—ã–ª–æ–∫)

* `ARC: automatic reference counting` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Å—á–µ—Ç —Å—Å—ã–ª–æ–∫)

–í Swift —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ __ARC (Automatic Reference Counting)__. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç Objective-C, –≥–¥–µ –º–æ–∂–Ω–æ –±—ã–ª–æ –≤—Ä—É—á–Ω—É—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `retain` –∏ `release`, –≤ Swift –≤—Å–µ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç ARC?

* –ü–æ–¥—Å—á–µ—Ç —Å—Å—ã–ª–æ–∫: –∫–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç –≤ Swift —Ö—Ä–∞–Ω–∏—Ç —Å—á–µ—Ç—á–∏–∫ —Å—Å—ã–ª–æ–∫ (`reference count`).
* –ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–±—ä–µ–∫—Ç, —Å—á–µ—Ç—á–∏–∫ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è.
* –ö–æ–≥–¥–∞ —Å—Å—ã–ª–∫–∞ —É–¥–∞–ª—è–µ—Ç—Å—è, —Å—á–µ—Ç—á–∏–∫ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è.
* –ö–æ–≥–¥–∞ —Å—á–µ—Ç—á–∏–∫ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç –Ω—É–ª—è, –ø–∞–º—è—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è.

```
class Person {
    let name: String
    init(name: String) {
        self.name = name
        print("\(name) —Å–æ–∑–¥–∞–Ω")
    }
    deinit {
        print("\(name) —É–Ω–∏—á—Ç–æ–∂–µ–Ω")
    }
}

var person1: Person? = Person(name: "–ò–≤–∞–Ω")  // –ò–≤–∞–Ω —Å–æ–∑–¥–∞–Ω
person1 = nil  // –ò–≤–∞–Ω —É–Ω–∏—á—Ç–æ–∂–µ–Ω (ARC –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –ø–∞–º—è—Ç—å)
```

–í Swift —Å ARC –º—ã –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∏—Å–ø–æ–ª—å–∑—É–µ–º `strong` (—Å–∏–ª—å–Ω—ã–µ), `weak` (—Å–ª–∞–±—ã–µ) –∏ `unowned` —Å—Å—ã–ª–∫–∏.

### –°–∏–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—Å–µ —Å—Å—ã–ª–∫–∏ –≤ Swift —Å–∏–ª—å–Ω—ã–µ, —Ç–æ –µ—Å—Ç—å –æ–Ω–∏ —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç —Å—á—ë—Ç—á–∏–∫ —Å—Å—ã–ª–æ–∫ –æ–±—ä–µ–∫—Ç–∞. –ü–æ–∫–∞ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ —Å–∏–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –æ–±—ä–µ–∫—Ç –Ω–µ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è.

```
class Person {
    var name: String

    init(name: String) {
        self.name = name
    }

    deinit {
        print("\(name) is being deinitialized")
    }
}

var person1: Person? = Person(name: "Alice")
var person2 = person1 // –í—Ç–æ—Ä–∞—è —Å–∏–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞

person1 = nil // –û–±—ä–µ–∫—Ç –Ω–µ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ `person2` –≤—Å—ë –µ—â—ë —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –Ω–µ–≥–æ
person2 = nil // –¢–µ–ø–µ—Ä—å –æ–±—ä–µ–∫—Ç –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è
```

__–û–±—ä–µ–∫—Ç –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ—Ö —Å–∏–ª—å–Ω—ã—Ö —Å—Å—ã–ª–æ–∫.__

### –°–ª–∞–±—ã–µ —Å—Å—ã–ª–∫–∏

–°–ª–∞–±—ã–µ (weak) —Å—Å—ã–ª–∫–∏ –Ω–µ —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç —Å—á—ë—Ç—á–∏–∫ —Å—Å—ã–ª–æ–∫ (retain count).

–û–Ω–∏ –º–æ–≥—É—Ç —Å—Ç–∞—Ç—å nil, –µ—Å–ª–∏ –æ–±—ä–µ–∫—Ç –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è.

–í—Å–µ–≥–¥–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ (Optional), —Ç–∞–∫ –∫–∞–∫ –æ–±—ä–µ–∫—Ç –º–æ–∂–µ—Ç –∏—Å—á–µ–∑–Ω—É—Ç—å.

```
class Person {
    var name: String
    weak var friend: Person? // —Å–ª–∞–±–∞—è —Å—Å—ã–ª–∫–∞

    init(name: String) {
        self.name = name
    }

    deinit {
        print("\(name) is being deinitialized")
    }
}

var person1: Person? = Person(name: "Alice")
var person2: Person? = Person(name: "Bob")

person1?.friend = person2 // `person1` –∏–º–µ–µ—Ç —Å–ª–∞–±—É—é —Å—Å—ã–ª–∫—É –Ω–∞ `person2`
person2?.friend = person1 // `person2` –∏–º–µ–µ—Ç —Å–ª–∞–±—É—é —Å—Å—ã–ª–∫—É –Ω–∞ `person1`
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ weak —Ä–∞–∑—Ä—ã–≤–∞–µ—Ç —Ü–∏–∫–ª —Å—Å—ã–ª–æ–∫, —Ç–∞–∫ –∫–∞–∫ –æ–¥–Ω–∞ –∏–∑ —Å—Å—ã–ª–æ–∫ –Ω–µ —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±—ä–µ–∫—Ç.

‚ùóÔ∏è __–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å weak?__

–ö–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç –º–æ–∂–µ—Ç –∏—Å—á–µ–∑–Ω—É—Ç—å –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–µ–ª–µ–≥–∞—Ç—ã, —Å–≤—è–∑–∏ –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –¥–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ).

### –ë–µ–∑ –≤–ª–∞–¥–µ–ª—å—Ü–∞ (unowned)

`unowned` —Å—Å—ã–ª–∫–∏ —Ç–æ–∂–µ –Ω–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—á—ë—Ç—á–∏–∫ —Å—Å—ã–ª–æ–∫.

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç `weak`, `unowned` –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—ã–≤–∞–µ—Ç `nil`.

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –µ—Å–ª–∏ –æ–±—ä–µ–∫—Ç –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ø–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Å—ã–ª–∫–∞.

üö® __–û–ø–∞—Å–Ω–æ—Å—Ç—å:
–µ—Å–ª–∏ –æ–±—ä–µ–∫—Ç –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è, –∞ unowned-—Å—Å—ã–ª–∫–∞ –µ—â—ë –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –ø—Ä–æ–≥—Ä–∞–º–º–∞ —É–ø–∞–¥—ë—Ç —Å crash'–µ–º.__

```
class Customer {
    var name: String
    var card: CreditCard?

    init(name: String) {
        self.name = name
    }

    deinit {
        print("\(name) is being deinitialized")
    }
}

class CreditCard {
    var number: String
    unowned let owner: Customer // unowned-—Å—Å—ã–ª–∫–∞

    init(number: String, owner: Customer) {
        self.number = number
        self.owner = owner
    }

    deinit {
        print("CreditCard \(number) is being deinitialized")
    }
}

var customer: Customer? = Customer(name: "Alice")
customer?.card = CreditCard(number: "1234-5678", owner: customer!)

customer = nil // ‚úÖ –û–±–∞ –æ–±—ä–µ–∫—Ç–∞ –æ—Å–≤–æ–±–æ–∂–¥–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
```

__–¢–∞–∫ –∫–∞–∫ CreditCard –Ω–µ –º–æ–∂–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –±–µ–∑ Customer, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ unowned –∑–¥–µ—Å—å —É–º–µ—Å—Ç–Ω–æ.__

## –ß—Ç–æ –∏–∑ —Å–µ–±—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –æ–±—ä–µ–∫—Ç–∞?

1. –í—ã–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ (–∞–ª–ª–æ–∫–∞—Ü–∏—è): –±–µ—Ä–µ—Ç –ø–∞–º—è—Ç—å –∏–∑ —Å—Ç–µ–∫–∞ –∏–ª–∏ –∫—É—á–∏.

2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è init-–∫–æ–¥ 

3. –≠–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è: –æ–±—ä–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

4. –î–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è deinit-–∫–æ–¥

5. –í—ã—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ (–¥–µ–∞–ª–ª–æ–∫–∞—Ü–∏—è): –ø–∞–º—è—Ç—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å—Ç–µ–∫—É –∏–ª–∏ –∫—É—á–µ –æ–±—Ä–∞—Ç–Ω–æ.

## –ö–∞–∫–∏–µ –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –≤ —Ä–∞–º–∫–∞—Ö —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é?

1. –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö, –∫–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç –µ—â–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è. –≠—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç —Å–±–æ–π –∏–ª–∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö.

2. –û–±—ä–µ–∫—Ç –Ω–µ –≤—ã—Å–≤–æ–±–æ–∂–¥–µ–Ω, –∫–æ–≥–¥–∞ –æ–Ω —É–∂–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è. –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —É—Ç–µ—á–∫–µ –ø–∞–º—è—Ç–∏.

3. –°–±–æ–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

## –£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏ (memory leak)

–ö–æ–≥–¥–∞ –≤—ã–¥–µ–ª–µ–Ω–Ω–∞—è –ø–æ–¥ –æ–±—ä–µ–∫—Ç –ø–∞–º—è—Ç—å –Ω–µ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è, —Ö–æ—Ç—å —Å–∞–º –æ–±—ä–µ–∫—Ç —É–∂–µ –±–æ–ª—å—à–µ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è, —ç—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è —É—Ç–µ—á–∫–æ–π –ø–∞–º—è—Ç–∏. 

–£—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ —Å–Ω–∏–∂–µ–Ω–∏—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã –∏–∑-–∑–∞ —É–≤–µ–ª–∏—á–µ–Ω–∏—è –æ–±—ä–µ–º–∞ –ø–æ—Ç—Ä–µ–±–ª—è–µ–º–æ–π –ø–∞–º—è—Ç–∏.

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/569/5fe/9af/5695fe9af988d01523e422ad587ece9a.png)

### –ö–∞–∫–æ–≤—ã –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é?

* –ö–æ–≥–¥–∞ –≤—ã —Å–æ–∑–¥–∞–µ—Ç–µ/–ø–æ–ª—É—á–∞–µ—Ç–µ –æ–±—ä–µ–∫—Ç, –Ω–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –≤—ã—Å–≤–æ–±–æ–∂–¥–∞—Ç—å –ø–∞–º—è—Ç—å –≤–ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–∏, –∫–æ–≥–¥–∞ –æ–Ω –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.

* –ó–∞–¥–µ–π—Å—Ç–≤—É–π—Ç–µ —Å—á–µ—Ç—á–∏–∫ —Å—Å—ã–ª–æ–∫ (retain count) –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –≤—ã—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ –≤ –ø–∞–º—è—Ç–∏.

* –ù–µ –≤—ã—Å–≤–æ–±–æ–∂–¥–∞–π—Ç–µ –æ–±—ä–µ–∫—Ç, –µ—Å–ª–∏ –≤—ã –Ω–µ –≤–ª–∞–¥–µ–µ—Ç–µ –∏–º.

### –ö–∞–∫ –æ–±—ä–µ–∫—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏, –∏ –∫–∞–∫ –æ–Ω–∞ –≤—ã—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è?

__–°–∏–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç —Å—á–µ—Ç—á–∏–∫ —Å—Å—ã–ª–æ–∫__. –ö–æ–≥–¥–∞ —Å—á–µ—Ç—á–∏–∫ —Å—Å—ã–ª–æ–∫ —Ä–∞–≤–µ–Ω –µ–¥–∏–Ω–∏—Ü–µ –∏–ª–∏ –±–æ–ª—å—à–µ, —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø–æ–¥ –æ–±—ä–µ–∫—Ç –≤—ã–¥–µ–ª–µ–Ω–∞ –ø–∞–º—è—Ç—å. –ö–æ–≥–¥–∞ —Å—á–µ—Ç—á–∏–∫ —Å—Å—ã–ª–æ–∫ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç –Ω—É–ª—è, —Ç–æ —ç—Ç–æ—Ç –æ–±—ä–µ–∫—Ç –±—É–¥–µ—Ç –≤—ã—Å–≤–æ–±–æ–∂–¥–µ–Ω.

#### –ü—Ä–∏–º–µ—Ä ‚Ññ1

–ú—ã —Å–æ–∑–¥–∞–ª–∏ –¥–≤–∞ –∫–ª–∞—Å—Å–∞: `Person` (—á–µ–ª–æ–≤–µ–∫) –∏ `Department` (–æ—Ç–¥–µ–ª). –û–±—ä–µ–∫—Ç `Person` —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `p1` –∞ –æ–±—ä–µ–∫—Ç `Department` —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `department` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ.

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/7ea/937/370/7ea937370ec0a0a42e8852abea59a7f1.png)

–ö–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç `Person` –≤—ã—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è –∏–∑ –ø–∞–º—è—Ç–∏, –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –µ–≥–æ –º–µ—Ç–æ–¥ `deinit`, –Ω–æ –º–µ—Ç–æ–¥ `deinit` –æ–±—ä–µ–∫—Ç–∞ `Department` –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è, –ø–æ—Å–∫–æ–ª—å–∫—É –µ–≥–æ —Å—á–µ—Ç—á–∏–∫ —Å—Å—ã–ª–æ–∫ –Ω–µ —Ä–∞–≤–µ–Ω –Ω—É–ª—é. –ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ `department` –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ `nil`, –µ–≥–æ —Å—á–µ—Ç—á–∫ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ä–∞–≤–Ω—ã–º –Ω—É–ª—é –∏ –æ–Ω –≤—ã—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è –∏–∑ –ø–∞–º—è—Ç–∏.

#### –ü—Ä–∏–º–µ—Ä ‚Ññ2

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/9e4/9e8/9f2/9e49e89f20e26ff939c632c495f40a00.png)

–í —ç—Ç–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏ –æ–±–∞ –æ–±—ä–µ–∫—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç –Ω–µ–Ω—É–ª–µ–≤–æ–π —Å—á–µ—Ç—á–∏–∫ —Å—Å—ã–ª–æ–∫, —Ç–∞–∫ –∫–∞–∫ –æ–±–∞ –æ–±—ä–µ–∫—Ç–∞ —Å—Å—ã–ª–∞—é—Ç—Å—è –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–º –∏—Ö –¥–µ–∞–ª–ª–æ–∫–∞—Ü–∏—é. –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —É—Ç–µ—á–∫–µ –ø–∞–º—è—Ç–∏. –¢–∞–∫–∞—è —Å–∏—Ç—É–∞—Ü–∏—è –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è __—Ü–∏–∫–ª–æ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (retain cycle)__.

### –¶–∏–∫–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (retain cycle)

–¶–∏–∫–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –∫–æ–≥–¥–∞ –¥–≤–∞ –æ–±—ä–µ–∫—Ç–∞ —Å—Å—ã–ª–∞—é—Ç—Å—è –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–º –∏—Ö –≤—ã—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –∏–∑ –ø–∞–º—è—Ç–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–±–∞ –∏—Ö —Å—á–µ—Ç—á–∏–∫–∞ —Å—Å—ã–ª–æ–∫ (retain count) –≤—Å–µ–≥–¥–∞ –±—É–¥—É—Ç —Ä–∞–≤–Ω—ã –µ–¥–∏–Ω–∏—Ü–µ –∏–ª–∏ –±–æ–ª—å—à–µ.

__–†–µ—à–µ–Ω–∏–µ__: c–¥–µ–ª–∞–π—Ç–µ –æ–¥–Ω—É –∏–∑ —Å—Å—ã–ª–æ–∫ `weak` –∏–ª–∏ `unowned`.

__–°–ª–∞–±–∞—è —Å—Å—ã–ª–∫–∞ –Ω–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—á–µ—Ç—á–∏–∫ —Å—Å—ã–ª–æ–∫.__ 

–°–ª–∞–±—ã–µ —Å—Å—ã–ª–∫–∏ –≤—Å–µ–≥–¥–∞ –æ–±—ä—è–≤–ª—è—é—Ç—Å—è –∫–∞–∫ optional-—Ç–∏–ø—ã. –ö–æ–≥–¥–∞ —Å—á–µ—Ç—á–∏–∫ —Å—Å—ã–ª–æ–∫ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ä–∞–≤–Ω—ã–º –Ω—É–ª—é, –æ–±—ä–µ–∫—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±—É–¥–µ—Ç –¥–µ–∞–ª–ª–æ—Ü–∏—Ä–æ–≤–∞–Ω.

__Unowned —Å—Å—ã–ª–∫–∞ –Ω–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—á–µ—Ç—á–∏–∫ —Å—Å—ã–ª–æ–∫__.

–û—Å–Ω–æ–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ –≤ —Ç–æ–º, —á—Ç–æ —ç—Ç–æ –Ω–µ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —Ç–∏–ø. –ï—Å–ª–∏ –≤—ã –ø–æ–ø—ã—Ç–∞–µ—Ç–µ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ unowned-—Å–≤–æ–π—Å—Ç–≤—É, –∫–æ—Ç–æ—Ä–æ–µ —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –¥–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç, –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –æ—à–∏–±–∫—É –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/90b/0c0/ad8/90b0c0ad811a518a8eca9c6059de0b2d.png)

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/b96/41e/5f9/b9641e5f9d6c2e62b421c1cc4aae6403.png)

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/9cd/ab4/372/9cdab4372ee94a314fbf737a2e72ad89.png)

### –¶–∏–∫–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–∏–ª—å–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ –≤ –∑–∞–º—ã–∫–∞–Ω–∏—è—Ö

–ö–æ–≥–¥–∞ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –∑–∞–º—ã–∫–∞–Ω–∏—è (`closures`) –≤–Ω—É—Ç—Ä–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞, –æ–Ω–∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –º–æ–≥—É—Ç –∑–∞—Ö–≤–∞—Ç–∏—Ç—å `self`. –ï—Å–ª–∏ `self`, –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —ç—Ç–æ –∑–∞–º—ã–∫–∞–Ω–∏–µ, —É –≤–∞—Å –±—É–¥–µ—Ç –≤–∑–∞–∏–º–Ω—ã–π —Ü–∏–∫–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–∏–ª—å–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ –º–µ–∂–¥—É –∑–∞–º—ã–∫–∞–Ω–∏–µ–º –∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–º –∫–ª–∞—Å—Å–∞.

–ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —ç—Ç–æ–≥–æ, –≤—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ –∂–µ —Å–∞–º—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ `weak` –∏ `unowned` –≤ —Å–ø–∏—Å–∫–µ –∑–∞—Ö–≤–∞—Ç–∞ (`capture list`) –∑–∞–º—ã–∫–∞–Ω–∏—è.

```
class MyClass {
    var closure: (() -> Void)?

    func setupClosure() {
        closure = {
            print("Hello from \(self)")
        }
    }

    deinit {
        print("MyClass deinitialized")
    }
}
var instance: MyClass? = MyClass()
instance?.setupClosure()
instance = nil // ‚ùå –û–±—ä–µ–∫—Ç –Ω–µ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ `self` —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ closure
```

#### –ü—Ä–æ–±–ª–µ–º–∞:

* –ó–∞–º—ã–∫–∞–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ `closure` –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç `self` —Å–∏–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–æ–π.
* `self` —Ç–æ–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Å—ã–ª–∫—É –Ω–∞ `closure`.

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –æ–±—ä–µ–∫—Ç `MyClass` –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è (—É—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏).

```
class MyClass {
    var closure: (() -> Void)?

    func setupClosure() {
        closure = { [weak self] in
            guard let self = self else { return }
            print("Hello from \(self)")
        }
    }

    deinit {
        print("MyClass deinitialized")
    }
}

var instance: MyClass? = MyClass()
instance?.setupClosure()
instance = nil // ‚úÖ –û–±—ä–µ–∫—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è
```
‚úÖ –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `unowned` —Å—Å—ã–ª–∫–∏.

__–†–µ—à–µ–Ω–∏–µ__

`self` —Ç–µ–ø–µ—Ä—å —Å–ª–∞–±–∞—è —Å—Å—ã–ª–∫–∞ –≤ –∑–∞–º—ã–≤–∞–Ω–∏–∏, —á—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —É—Ç–µ—á–∫—É.

–ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç —É–∂–µ –æ—Å–≤–æ–±–æ–∂–¥—ë–Ω, `self` —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è `nil`, –∏ –∑–∞–º—ã–∫–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É.

### –ö–∞–∫ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏?

__Xcode__ –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –æ—Ç–ª–∞–¥—á–∏–∫ –≥—Ä–∞—Ñ–∞ –ø–∞–º—è—Ç–∏. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º —É–≤–∏–¥–µ—Ç—å, —Å–∫–æ–ª—å–∫–æ —Å—Å—ã–ª–æ–∫ –∏–º–µ–µ—Ç—Å—è –Ω–∞ –æ–±—ä–µ–∫—Ç –∏ –∫–∞–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è.

__–ö—É—á–∏ –∏ —Å—Ç–µ–∫–∏__: Swift –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–¥–µ–ª—è–µ—Ç –ø–∞–º—è—Ç—å –ª–∏–±–æ –≤ –∫—É—á–µ, –ª–∏–±–æ –≤ —Å—Ç–µ–∫–µ.

#### –°—Ç–µ–∫

* –°—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –≤–æ –≤—Ä–µ–º—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏.

* –°—Ç–µ–∫ –∏–º–µ–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö LIFO (–ø–æ—Å–ª–µ–¥–Ω–∏–π –≤–æ—à–µ–ª, –ø–µ—Ä–≤—ã–π –≤—ã—à–µ–ª).

* –û—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø.

* –ö–æ–≥–¥–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è, –≤—Å–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –±—É–¥—É—Ç –ø–æ–º–µ—â–µ–Ω—ã –≤ —Ç–µ–∫—É—â–∏–π —Å—Ç–µ–∫. –ò –∫–∞–∫ —Ç–æ–ª—å–∫–æ —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–≤–µ—Ä—à–∏—Ç –≤–æ–∑–≤—Ä–∞—Ç, –≤—Å–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –∏–∑ —Å—Ç–µ–∫–∞.

* –î–∞–Ω–Ω—ã–µ, —Ö—Ä–∞–Ω—è—â–∏–µ—Å—è –≤ —Å—Ç–µ–∫–µ, –Ω–∞—Ö–æ–¥—è—Ç—Å—è —Ç–∞–º —Ç–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–Ω–æ, –ø–æ–∫–∞ —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç —Ä–∞–±–æ—Ç—É –∏ –Ω–µ –≤—ã–∑–æ–≤–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –≤—Å–µ–π –ø–∞–º—è—Ç–∏ –≤ —Å—Ç–µ–∫–µ.

* –ö–∞–∂–¥–∞—è ‚Äú–æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏‚Äù (scope) –≤ –≤–∞—à–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–µ—Ç–æ–¥–∞) –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –æ–±—ä–µ–º –ø–∞–º—è—Ç–∏.

* –°—Ç–µ–∫ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å –æ–±—ä–µ–∫—Ç–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –∏–º–µ—é—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä.

* –ö–∞–∂–¥—ã–π –ø–æ—Ç–æ–∫ –∏–º–µ–µ—Ç —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å—Ç–µ–∫

* –í —Å—Ç–µ–∫–∞—Ö —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–∞–∫–∏–µ —Ç–∏–ø—ã –∑–Ω–∞—á–µ–Ω–∏–π, –∫–∞–∫ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è.

* –ï—Å–ª–∏ —Ä–∞–∑–º–µ—Ä –≤–∞—à–µ–≥–æ —Ç–∏–ø–∞ –∑–Ω–∞—á–µ–Ω–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤–æ –≤—Ä–µ–º—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏–ª–∏ –µ—Å–ª–∏ –≤–∞—à —Ç–∏–ø –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ/–Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –≤ —Å—Å—ã–ª–æ—á–Ω–æ–º —Ç–∏–ø–µ, —Ç–æ–≥–¥–∞ –æ–Ω –±—É–¥–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –∞–ª–ª–æ–∫–∞—Ü–∏–∏ –≤ —Å—Ç–µ–∫–µ.

* –¢–∏–ø-–∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—á–µ—Ç—á–∏–∫ —Å—Å—ã–ª–æ–∫. –ù–æ –µ—Å–ª–∏ –≤–∞—à —Ç–∏–ø-–∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å—Å—ã–ª–∫–∏, –µ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ç—Ä–µ–±—É–µ—Ç —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∞ —Å—Å—ã–ª–æ–∫ –µ–≥–æ –¥–æ—á–µ—Ä–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.

#### –ö—É—á–∞

* –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

* –ö –∑–Ω–∞—á–µ–Ω–∏—è–º –º–æ–∂–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è –ø–æ –∞–¥—Ä–µ—Å—É –≤ –ø–∞–º—è—Ç–∏.

* –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ —Ä–∞–∑–º–µ—Ä –ø–∞–º—è—Ç–∏.

* –ë–æ–ª–µ–µ –º–µ–¥–ª–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø.

* –ö–æ–≥–¥–∞ –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –æ–±—ä–µ–º –ø–∞–º—è—Ç–∏, –∫—É—á–∞ –∏—â–µ—Ç –∞–¥—Ä–µ—Å –ø–∞–º—è—Ç–∏, –∫–æ—Ç–æ—Ä—ã–π —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è–µ—Ç —ç—Ç–æ–º—É –∑–∞–ø—Ä–æ—Å—É, –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å—É.

* –ö–æ–≥–¥–∞ –ø–∞–º—è—Ç—å –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –ø—Ä–æ—Ü–µ—Å—Å –¥–æ–ª–∂–µ–Ω —É–∫–∞–∑–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –ø–∞–º—è—Ç–∏ –æ –≤—ã—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–∏ —ç—Ç–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ –ø–∞–º—è—Ç–∏.

* –¢—Ä–µ–±—É–µ—Ç –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

* –ö—É—á–∞ —Å–æ–≤–º–µ—Å—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Å–µ–º, —á–µ–º —É–≥–æ–¥–Ω–æ.

* –ï—Å–ª–∏ —Ä–∞–∑–º–µ—Ä –≤–∞—à–µ–≥–æ —Ç–∏–ø–∞ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤–æ –≤—Ä–µ–º—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ (–∏–∑-–∑–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞/–æ–±—â–µ–≥–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è), –∏–ª–∏ –µ—Å–ª–∏ –≤–∞—à —Ç–∏–ø –∑–Ω–∞—á–µ–Ω–∏—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç/—Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è —Å—Å—ã–ª–æ—á–Ω—ã–º —Ç–∏–ø–æ–º (–ø–æ–º–Ω–∏—Ç–µ, —á—Ç–æ –∑–∞–º—ã–∫–∞–Ω–∏—è —Ç–∞–∫–∂–µ —è–≤–ª—è—é—Ç—Å—è —Å—Å—ã–ª–æ—á–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏), —Ç–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—ã–¥–µ–ª–µ–Ω–∏–µ –≤ –∫—É—á–µ.

* –ö–ª–∞—Å—Å —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –∫—É—á–µ.

–ê–ª–ª–æ–∫–∞—Ü–∏—è –≤ –∫—É—á–µ –º–µ–¥–ª–µ–Ω–Ω–µ–µ, —á–µ–º –∞–ª–ª–æ–∫–∞—Ü–∏—è –≤ —Å—Ç–µ–∫–µ –Ω–µ —Ç–æ–ª—å–∫–æ –∏–∑-–∑–∞ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö ‚Äî –æ–Ω–∞ —Ç–∞–∫–∂–µ —Ç—Ä–µ–±—É–µ—Ç –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –ö–∞–∂–¥—ã–π –ø–æ—Ç–æ–∫ –∏–º–µ–µ—Ç —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å—Ç–µ–∫, –Ω–æ –∫—É—á–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ –≤—Å–µ–º, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.

